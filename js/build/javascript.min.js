function moveScreen(a){a=a||window.event,"38"==a.keyCode||"40"==a.keyCode||"37"==a.keyCode||"39"==a.keyCode}var loadweather=function(){var a="https://api.forecast.io/forecast/26dae662918aed65b1fe416e45c69348/45.5000,-73.5667";$.ajax({url:a,jsonpCallback:"jsonCallBack",contentType:"application/json",dataType:"jsonp",success:function(a){var b=parseInt(a.currently.temperature),c=Math.round((b-32)*(5/9)),d=a.currently.summary;$(".mtlTemp").html(c+"&deg with "+d+". ")},erroer:function(a){console.log(a.message)}})},buttonActive=function(){$(".render-control, .rotate-control").click(function(){$(this).toggleClass("button-active")})},rotateRobot=function(){var a=($(".slider-control").val()+"s",$(".cube")),b="-webkit-animation-play-state",c="-moz-animation-play-state",d="-ms-animation-play-state",e="-o-animation-play-state",f=$(".rotate-control");a.css("-webkit-animation-play-state","paused"),a.css("-moz-animation-play-state","paused"),a.css("-ms-animation-play-state","paused"),a.css("-o-animation-play-state","paused"),f.click(function(){a.css(b,function(a,b){return"paused"===b?"running":"paused"}),$("body").toggleClass("paused","paused"===$(this).css(b)),$("body").toggleClass("paused","paused"===$(this).css(c)),$("body").toggleClass("paused","paused"===$(this).css(d)),$("body").toggleClass("paused","paused"===$(this).css(e))})},renderRobot=function(){var a=$(".heartholder"),b=$(".cube"),c=$(".render-control"),d=$(".onoffholder");a.removeClass("heart"),d.remove(".on-off"),c.click(function(){b.toggleClass("preserve3D"),a.toggleClass("heart");var c=$(".onoffholder");0===b.find("figure.on-off").length?(b.append('<figure class="on-off onoffholder"><img class="on-off-image" src="img/on-off.png"/><figure class="green-button"></figure></figure>'),heartReveal()):c.remove(".on-off")})},heartReveal=function(){var a=$(".body-back"),b=$(".on-off"),c=$(".body-front"),d=$(".front-panel");$(".stage").mouseenter(function(){a.animate({textIndent:-200},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}).mouseleave(function(){var a=$(".body-back");a.animate({textIndent:-66},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}),$(".stage").mouseenter(function(){b.animate({overFlow:-203},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)","-webkit-transform","rotateY(180deg)"),$(this).css("-moz-transform","translateZ("+a+"px)","-moz-transform","rotateY(180deg)"),$(this).css("-ms-transform","translateZ("+a+"px)","-ms-transform","rotateY(180deg)")},duration:"slow"},"linear")}).mouseleave(function(){b.animate({overFlow:-70},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}),$(".stage").mouseenter(function(){c.animate({textIndent:200},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}).mouseleave(function(){c.animate({textIndent:66},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}),$(".stage").mouseenter(function(){d.animate({textIndent:203},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}).mouseleave(function(){d.animate({textIndent:68},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")})},playVideo=function(){var a=!1;$(window).scroll(function(){a=!0}),setInterval(function(){if(a){var b=document.getElementById("myVideo");pageYOffset>1100&&pageYOffset<2e3?b.play():b.pause(),a=!1}},500)},formSubmission=function(){$("#myForm").submit(function(a){a.preventDefault();var b=$(".button"),c=$(".response-message"),d=$("#name").val(),e=$("#email").val(),f=$("#message").val(),g="name="+d+"&email="+e+"&message="+f;""!=d&&""!=e&&""!=f?$.ajax({type:"POST",url:"php/contact.php",data:g,success:function(){b.css("background-image","none"),b.animate({backgroundColor:"#43A047",color:"#fff"},300),window.setTimeout(function(){b.delay(1e3).html("success")},400),c.animate({opacity:.8}),c.fadeIn("slow").html("Thank you, "+d+", I will respond shortly.")},error:function(){b.css("background-image","none"),b.animate({backgroundColor:"#CD4435",color:"#fff"},300),window.setTimeout(function(){b.delay(1e3).html("error")},400),c.animate({opacity:.8}),c.fadeIn("slow").html("Sorry, "+d+', there was an error. Please email <a class="header-mailto" href="mailto:brotzky@gmail.com?Subject=Form%20error" target="_top">brotzky@gmail.com</a>.')}}):$("input, textarea").addClass("color")})};$(document).ready(function(){loadweather(),moveScreen(),buttonActive(),renderRobot(),rotateRobot(),heartReveal(),playVideo(),formSubmission()});