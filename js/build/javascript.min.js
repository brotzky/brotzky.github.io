function moveScreen(a){a=a||window.event,"38"==a.keyCode||"40"==a.keyCode||"37"==a.keyCode||"39"==a.keyCode}!function(a,b,c,d){function e(a,b){return a[b]===d?t[b]:a[b]}function f(){var a=b.pageYOffset;return a===d?r.scrollTop:a}function g(a,b){var c=t["on"+a];c&&(w(c)?c.call(b[0]):(c.addClass&&b.addClass(c.addClass),c.removeClass&&b.removeClass(c.removeClass))),b.trigger("lazy"+a,[b]),k()}function h(b){g(b.type,a(this).off(p,h))}function i(c){if(A.length){c=c||t.forceLoad,B=1/0;var d,e,i=f(),j=b.innerHeight||r.clientHeight,k=b.innerWidth||r.clientWidth;for(d=0,e=A.length;e>d;d++){var l,m=A[d],o=m[0],q=m[n],s=!1,u=c;if(z(r,o)){if(c||!q.visibleOnly||o.offsetWidth||o.offsetHeight){if(!u){var v=o.getBoundingClientRect(),x=q.edgeX,y=q.edgeY;l=v.top+i-y-j,u=i>=l&&v.bottom>-y&&v.left<=k+x&&v.right>-x}if(u){g("show",m);var C=q.srcAttr,D=w(C)?C(m):o.getAttribute(C);D&&(m.on(p,h),o.src=D),s=!0}else B>l&&(B=l)}}else s=!0;s&&(A.splice(d--,1),e--)}e||g("complete",a(r))}}function j(){C>1?(C=1,i(),setTimeout(j,t.throttle)):C=0}function k(a){A.length&&(a&&"scroll"===a.type&&a.currentTarget===b&&B>=f()||(C||setTimeout(j,0),C=2))}function l(){v.lazyLoadXT()}function m(){i(!0)}var n="lazyLoadXT",o="lazied",p="load error",q="lazy-hidden",r=c.documentElement||c.body,s=b.onscroll===d||!!b.operamini||!r.getBoundingClientRect,t={autoInit:!0,selector:"img[data-src]",blankImage:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",throttle:99,forceLoad:s,loadEvent:"pageshow",updateEvent:"load orientationchange resize scroll touchmove focus",forceEvent:"",oninit:{removeClass:"lazy"},onshow:{addClass:q},onload:{removeClass:q,addClass:"lazy-loaded"},onerror:{removeClass:q},checkDuplicates:!0},u={srcAttr:"data-src",edgeX:0,edgeY:0,visibleOnly:!0},v=a(b),w=a.isFunction,x=a.extend,y=a.data||function(b,c){return a(b).data(c)},z=a.contains||function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},A=[],B=0,C=0;a[n]=x(t,u,a[n]),a.fn[n]=function(c){c=c||{};var d,f=e(c,"blankImage"),h=e(c,"checkDuplicates"),i=e(c,"scrollContainer"),j={};a(i).on("scroll",k);for(d in u)j[d]=e(c,d);return this.each(function(d,e){if(e===b)a(t.selector).lazyLoadXT(c);else{if(h&&y(e,o))return;var i=a(e).data(o,1);f&&"IMG"===e.tagName&&!e.src&&(e.src=f),i[n]=x({},j),g("init",i),A.push(i)}})},a(c).ready(function(){g("start",v),v.on(t.loadEvent,l).on(t.updateEvent,k).on(t.forceEvent,m),a(c).on(t.updateEvent,k),t.autoInit&&l()})}(window.jQuery||window.Zepto||window.$,window,document),function(a){var b=a.lazyLoadXT,c=b.bgAttr||"data-bg";b.selector+=",["+c+"]",a(document).on("lazyshow",function(b){var d=a(b.target);-1===d.context.outerHTML.indexOf("data-src")&&d.css("background-image","url('"+d.attr(c)+"')").removeAttr(c)}),a.extend(a.lazyLoadXT,{edgeY:350})}(window.jQuery||window.Zepto||window.$);var dropDown=function(){var a=!1,b=$("nav");$(window).scroll(function(){a=!0}),setInterval(function(){a&&(!($(this).scrollTop()<500)&&$(window).width()>=769?b.hasClass("show")||b.addClass("show"):$(this).scrollTop()<500&&$(window).width()>=769&&b.removeClass("show"),a=!1)},400)},buttonActive=function(){$(".render-control, .rotate-control").click(function(){$(this).toggleClass("button-active")})},rotateRobot=function(){var a=($(".slider-control").val()+"s",$(".cube")),b="-webkit-animation-play-state",c="-moz-animation-play-state",d="-ms-animation-play-state",e="-o-animation-play-state",f=$(".rotate-control");a.css("-webkit-animation-play-state","paused"),a.css("-moz-animation-play-state","paused"),a.css("-ms-animation-play-state","paused"),a.css("-o-animation-play-state","paused"),f.click(function(){a.css(b,function(a,b){return"paused"===b?"running":"paused"}),$("body").toggleClass("paused","paused"===$(this).css(b)),$("body").toggleClass("paused","paused"===$(this).css(playStateWebkit)),$("body").toggleClass("paused","paused"===$(this).css(c)),$("body").toggleClass("paused","paused"===$(this).css(d)),$("body").toggleClass("paused","paused"===$(this).css(e))})},renderRobot=function(){var a=$(".heartholder"),b=$(".cube"),c=$(".render-control"),d=$(".onoffholder");a.removeClass("heart"),d.remove(".on-off"),c.click(function(){b.toggleClass("preserve3D"),a.toggleClass("heart");var c=$(".onoffholder");0===b.find("figure.on-off").length?(b.append('<figure class="on-off onoffholder"><img class="on-off-image" src="img/on-off.png"/><figure class="green-button"></figure></figure>'),heartReveal()):c.remove(".on-off")})},heartReveal=function(){var a=$(".body-back"),b=$(".on-off"),c=$(".body-front"),d=$(".front-panel");$(".stage").mouseenter(function(){a.animate({textIndent:-200},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}).mouseleave(function(){var a=$(".body-back");a.animate({textIndent:-66},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}),$(".stage").mouseenter(function(){b.animate({overFlow:-203},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)","-webkit-transform","rotateY(180deg)"),$(this).css("-moz-transform","translateZ("+a+"px)","-moz-transform","rotateY(180deg)"),$(this).css("-ms-transform","translateZ("+a+"px)","-ms-transform","rotateY(180deg)")},duration:"slow"},"linear")}).mouseleave(function(){b.animate({overFlow:-70},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}),$(".stage").mouseenter(function(){c.animate({textIndent:200},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}).mouseleave(function(){c.animate({textIndent:66},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}),$(".stage").mouseenter(function(){d.animate({textIndent:203},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")}).mouseleave(function(){d.animate({textIndent:68},{step:function(a){$(this).css("-webkit-transform","translateZ("+a+"px)")},duration:"slow"},"linear")})},playVideo=function(){var a=!1;$(window).scroll(function(){a=!0}),setInterval(function(){if(a){var b=document.getElementById("myVideo");pageYOffset>1100&&pageYOffset<2e3?b.play():b.pause(),a=!1}},500)},formSubmission=function(){$("#myForm").submit(function(a){a.preventDefault();var b=$(".button"),c=$(".response-message"),d=$("#name").val(),e=$("#email").val(),f=$("#message").val(),g="name="+d+"&email="+e+"&message="+f;""!=d&&""!=e&&""!=f?$.ajax({type:"POST",url:"php/contact.php",data:g,success:function(){b.css("background-image","none"),b.animate({backgroundColor:"#43A047",color:"#fff"},300),window.setTimeout(function(){b.delay(1e3).html("success")},400),c.animate({opacity:.8}),c.fadeIn("slow").html("Thank you, "+d+", I will respond shortly.")},error:function(){b.css("background-image","none"),b.animate({backgroundColor:"#CD4435",color:"#fff"},300),window.setTimeout(function(){b.delay(1e3).html("error")},400),c.animate({opacity:.8}),c.fadeIn("slow").html("Sorry, "+d+', there was an error. Please email <a class="header-mailto" href="mailto:brotzky@gmail.com?Subject=Form%20error" target="_top">brotzky@gmail.com</a>.')}}):$("input, textarea").addClass("color")})};$(document).ready(function(){dropDown(),moveScreen(),buttonActive(),renderRobot(),rotateRobot(),heartReveal(),playVideo(),formSubmission()});